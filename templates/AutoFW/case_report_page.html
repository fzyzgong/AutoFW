<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script type="text/javascript" src="/static/jquery_easyui/jquery.min.js"></script>

    <style type="text/css">
         /*列表展示*/
        #c_report_display_list{
            width: 1200px;
        }
        #c_report_display_list td{
            border: solid 1px;
            text-align: center;
        }

        #c_report_list_t{
            width: 1200px;
            border: 1px solid #0094ff
        }

        #c_report_list_t .case_report_list_title_name{
            width: 50px;
            text-align: center;
            background: greenyellow;
        }

        #c_report_list_t .case_report_API_title_name{
            width: 200px;
            text-align: center;
            background: greenyellow;
        }

        #c_report_list_t .case_report_log_title_name{
            width: 850px;
            text-align: center;
            background: greenyellow;
        }

        #c_report_list_t .case_report_status_title_name{
            width: 100px;
            text-align: center;
            background: greenyellow;
        }

        #c_report_name_top{
            text-align: center;
        }

    </style>
</head>
<body>
    <h2 id="c_report_page_top_name" name="{{ username }}">用例测试报告管理中心</h2>
    <hr />
    <div>
        <table id="c_rp_search_table">
                <tr id="c_rp_search_tr">
                    <td>查询报告</td>
                    <td>
                        <input name="c_rp_seach_case_b" type="button" class="case_rp_search_button" value="查询" onclick="case_rp_search_report()">
                        <input name="c_rp_reset_b" type="button" class="case_rp_reset_button" value="重置">
                    </td>
                </tr>
                <tr style="background: black">
                    <td colspan="3" style="height: 2px"></td>
                </tr>
                <tr>
                    <td>
                        <label id="c_report_name_label">报告名称：</label>
                        <input id="c_report_name_input_id" class="case_report_name_input" type="text">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label id="c_report_create_label">创 建 人 ：</label>
                        <select id="c_report_create_section" required style="width: 175px">
                            <option></option>
                            {% for list in execute_man_list%}
                            <option>{{list.username}}</option>
                            {%endfor%}
                        </select>
                    </td>
                </tr>
        </table>
    </div>
    <div>
        <table id="c_report_display_list" cellspacing="0" border="1">
            <tr>
                <td id="c_report_id">报告ID</td>
                <td id="c_report_name">报告名称</td>
                <td id="c_report_create_time">报告生成时间</td>
                <td id="c_execute_man">执行人</td>
                <td id="c_options">操作</td>
            </tr>
        </table>
    </div>
    <br />
    <hr />
    <br />
    <div>
        <table id="c_report_list_t" cellspacing="0" cellpadding="0" border="1">
            <tr id="c_report_name_top">
                <td style="background: greenyellow"><span id="c_execute_report_name_total_left">测试报告名称</span></td>
                <td colspan="3"><span id="c_execute_report_name_total"  style="font-size: 25px"></span></td>
            </tr>
            <tr>
                <td class="case_report_list_title_name"><span>用例总数</span></td>
                <td width="450px" align="center"><span id="c_execute_report_api_total" style="text-align: center"></span></td>
                <td class="case_report_list_title_name"><span>通过</span></td>
                <td align="center" style="background: greenyellow"><span id="c_execute_report_pass_total" style="text-align: center"></span></td>
            </tr>
            <tr>
                <td class="case_report_list_title_name"><span>执行人</span></td>
                <td width="450px" align="center"><span id="c_execute_report_execute_man" style="text-align: center"></span></td>
                <td class="case_report_list_title_name"><span>失败</span></td>
                <td align="center" style="background: red"><span id="c_execute_report_fail_total" style="text-align: center"></span></td>
            </tr>
            <tr>
                <td class="case_report_list_title_name"><span>执行时间</span></td>
                <td width="450px" align="center"><span id="c_execute_report_execute_time" style="text-align: center"></span></td>
                <td class="case_report_list_title_name"><span>跳过</span></td>
                <td align="center" style="background: yellow"><span id="c_execute_report_skip_total" style="text-align: center"></span></td>
            </tr>
            <tr>
                <td class="case_report_API_title_name"><span>用例_名称</span></td>
                <td class="case_report_log_title_name" colspan="2"><span>过程日志</span></td>
                <td class="case_report_status_title_name"><span>状态</span></td>
            </tr>
        </table>
    </div>

    <script type="text/javascript">

        function case_rp_search_report() {
            var report_name = $("#c_report_name_input_id").val();
            var execute_man = $("#c_report_create_section option:selected").text();

            //判断项目名称和模块名称必选
            if(report_name.length == 0 && execute_man.length == 0){
                alert("报告名称和创建人必须有一项不为空");
                return;
            }

            $.ajax({
                url:"/AutoFW/case_search_report_list/",
                type: "get",
                data: "report_name="+report_name+"&execute_man="+execute_man,//
                success:function (data) {
                    if(data.status == "success"){
                        if(data.case_report_list.length > 0){
                            $(".case_report_display_list_td").remove();

                            for(var i = 0; i < data.case_report_list.length; i++){
//                                alert(data.script_list[i].script_name);
//                                alert(data.script_list[i].script_project_name);/////
//                                alert(data.script_list[i].script_path);
//                                alert(data.script_list[i].script_module_name);
//                                alert(data.script_list[i].script_status);/////

                                $("#c_report_display_list").append(
                                    '<tr id="c_report_display_list" class="case_report_display_list_td">' +
//                                        '<td class="script_list_td"><input class="checkbox_input_script_name" type="checkbox" value="'+data.script_list[i].script_name+'" onclick="cancel_all()"></td>' +
                                        '<td class="case_report_display_list_td">'+data.case_report_list[i].report_id+'</td>' +
                                        '<td class="case_report_display_list_td">'+data.case_report_list[i].report_name+'</td>' +
                                        '<td class="case_report_display_list_td">'+data.case_report_list[i].execute_time+'</td>' +
                                        '<td class="case_report_display_list_td">'+data.case_report_list[i].execute_man+'</td>' +
                                        '<td class="case_report_display_list_td">' +
                                        '<input class="case_report_display_list_td" name="'+ data.case_report_list[i].report_id +'" type="button" value="查看详情" onclick="return case_look_report_td(this)">' +
                                        '<input class="case_report_display_list_td" name="'+ data.case_report_list[i].report_id +'" type="button" value="删除报告" onclick="return case_delete_report_td(this)">' +
                                        '<input class="case_report_display_list_td" name="'+ data.case_report_list[i].report_id +'" type="button" value="发送邮件" onclick="return case_send_email_td(this)">' +
                                        '</td>' +
                                    '</tr>'
                                );
                            }
                        }else {
//                                alert("没有匹配到数据");
                            $(".case_report_display_list_td").remove();
                            $("#c_report_display_list").append('<tr style="text-align: center" class="case_report_display_list_td"><td colspan="5" class="case_script_list_td" style="background: orangered">没有匹配到数据(注意字母大小写)</td></tr>');
                        }

                    }else {
                        alert("error");
                    }
                }
            });
        }
    </script>

</body>
</html>